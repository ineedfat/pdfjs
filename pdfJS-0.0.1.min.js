/***********************************************
* pdfJS JavaScript Library
* Authors: https://github.com/ineedfat/pdfjs
* License: MIT (http://www.opensource.org/licenses/mit-license.php)
* Compiled At: 03/05/2013 19:18
***********************************************/
(function(_) {
'use strict';
/*! pdfJS.js | https://github.com/ineedfat | 2013-03-05 | iNeedFat(https://github.com/ineedfat)*/
var PDFJS_VERSION = '0.0.1';
Object.create||(Object.create=function(e){function t(){}if(arguments.length>1)throw new Error("Object.create implementation only accepts the first parameter.");return t.prototype=e,new t}),typeof btoa=="undefined"&&(window.btoa=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=t.split(""),r,i,s,o,u,a,f,l,c=0,h=0,p="",d=[];do r=e.charCodeAt(c++),i=e.charCodeAt(c++),s=e.charCodeAt(c++),l=r<<16|i<<8|s,o=l>>18&63,u=l>>12&63,a=l>>6&63,f=l&63,d[h++]=n[o]+n[u]+n[a]+n[f];while(c<e.length);p=d.join("");var v=e.length%3;return(v?p.slice(0,v-3):p)+"===".slice(v||3)}),typeof atob=="undefined"&&(window.atob=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n,r,i,s,o,u,a,f,l=0,c=0,h="",p=[];if(!e)return e;e+="";do s=t.indexOf(e.charAt(l++)),o=t.indexOf(e.charAt(l++)),u=t.indexOf(e.charAt(l++)),a=t.indexOf(e.charAt(l++)),f=s<<18|o<<12|u<<6|a,n=f>>16&255,r=f>>8&255,i=f&255,u==64?p[c++]=String.fromCharCode(n):a==64?p[c++]=String.fromCharCode(n,r):p[c++]=String.fromCharCode(n,r,i);while(l<e.length);return h=p.join(""),h});var mixin=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e.prototype[n]=t[n])},graphicOperators={translate:function(e,t){this.currentStream.push("1 0 0 1 "+e+" "+t+" cm")},scale:function(e,t){this.currentStream.push(e+" 0 0 "+t+" 0 0 cm")},rotate:function(e){var t=Math.cos(e),n=Math.sin(e);this.currentStream.push(t+" "+n+" -"+n+" "+t+" 0 0 cm")},skew:function(e,t){this.currentStream.push("1 "+Math.tan(e)+" "+Math.tan(t)+" 1 0 0 cm")},colorSpace:function(){},color:function(){},textState:function(){},lineWidth:function(e){this.currentStream.push(e+" w")},lineCap:function(e){this.currentStream.push(e+" J")},lineJoin:function(e){this.currentStream.push(e+" j")},miterLimit:function(e){this.currentStream.push(e+" M")},dashPattern:function(e,t){this.currentStream.push(e+" "+t+" d")},renderingIntent:function(e){this.currentStream.push(e+" ri")},strokeAdjustment:function(){},pushState:function(){this.currentStream.push("q")},popState:function(){this.currentStream.push("Q")},newSubPath:function(e,t){if(arguments.length!=4)throw"Invalid new path parameters";var n=Array.prototype.slice.call(arguments);this.currentStream.push(n.join(" ")+" m")},straightLine:function(e,t){if(arguments.length!=4)throw"Invalid straight line  parameters";var n=Array.prototype.slice.call(arguments);this.currentStream.push(n.join(" ")+" l")},bezierCurve:function(e,t,n,r,i,s){var o=Array.prototype.slice.call(arguments);switch(arguments.length){case 4:this.currentStream.push(o.join(" ")+" v");break;case 5:this.currentStream.push(o.slice(0,4).join(" ")+" y");break;case 6:this.currentStream.push(o.join(" ")+" c");break;default:throw"Invalid bezier curve parameters"}},close:function(){this.currentStream.push("h")},paintPath:function(e){this.currentStream.push(e)},clip:function(e){this.currentStream.push("W"+(e?" *":""))},rect:function(e,t,n,r){if(arguments.length!=4)throw"Invalid rectangle parameters";var i=Array.prototype.slice.call(arguments);this.currentStream.push(i.join(" ")+" re")},fillColorSpace:function(e){this.currentStream.push(e+" cs")},strokeColorSpace:function(e){this.currentStream.push(e+" CS")},fillColor:function(e,t,n,r){switch(arguments.length){case 1:case 3:case 4:var i=Array.prototype.slice.call(arguments);this.currentStream.push(i.join(" ")+" sc");break;default:throw"Invalid color values"}},strokeColor:function(e,t,n,r){switch(arguments.length){case 1:case 3:case 4:var i=Array.prototype.slice.call(arguments);this.currentStream.push(i.join(" ")+" SC");break;default:throw"Invalid color values"}},grayFill:function(e){this.currentStream.push(e+" g")},grayStroke:function(e){this.currentStream.push(e+" G")},rgbFill:function(e,t,n){if(arguments.length!=3)throw"Invalid RGB color values";var r=Array.prototype.slice.call(arguments);this.currentStream.push(r.join(" ")+" rg")},rgbStroke:function(){if(arguments.length!=3)throw"Invalid RGB color values";var e=Array.prototype.slice.call(arguments);this.currentStream.push(e.join(" ")+" RG")},cmykFill:function(){if(arguments.length!=4)throw"Invalid CMYK color values";var e=Array.prototype.slice.call(arguments);this.currentStream.push(e.join(" ")+" k")},cmykStroke:function(){if(arguments.length!=4)throw"Invalid CMYK color values";var e=Array.prototype.slice.call(arguments);this.currentStream.push(e.join(" ")+" K")},addImage:function(e,t,n,r,i){return!r&&!i&&(r=-96,i=-96),r<0&&(r=-1*e.width*72/r),i<0&&(i=-1*e.height*72/i),r===0&&(r=i*e.width/e.height),i===0&&(i=r*e.height/e.width),this.currentStream.push("q"),this.currentStream.push(r.toFixed(2)+" 0 0 "+i.toFixed(2)+" "+t.toFixed(2)+" "+(n+i).toFixed(2)+" cm"),this.currentStream.push("/"+e.name+" Do"),this.currentStream.push("Q"),this}},textOperators={beginText:function(){this.currentStream.push("BT")},endText:function(){this.currentStream.push("ET")},textPosition:function(e,t){this.currentStream.push(e+" "+t+" td")},textPositionWithLeading:function(e,t){this.currentStream.push(e+" "+t+" TD")},charSpace:function(e){this.currentStream.push(e+" Tc")},wordSpace:function(e){this.currentStream.push(e+" Tw")},scaleText:function(e){this.currentStream.push(e+" Tz")},leading:function(e){this.currentStream.push(e+" TL")},fontSize:function(e){this.currentStream.push(e+" Tf")},fontStyle:function(e,t,n){var r=e&&t?this.doc.fontmap[e][t]:this.doc.resObj.fontObjs[0].description.key,i=arguments.length;this.currentStream.push("/"+r),i>=3&&this.fontSize(arguments[2])},renderMode:function(e){this.currentStream.push(render+" Tr")},rise:function(e){this.currentStream.push(e+" Ts")},showText:function(e,t,n){arguments.length===1?this.currentStream.push("("+sanitize(e)+") Tj"):this.currentStream.push(t+" "+n+" ("+sanitize(e)+') "')},showArrayText:function(e){var t;len,temp;for(t=0,len=e.length;I<len;t++)temp=e[t],typeof temp=="string"&&(e[t]="("+temp+")");this.currentStream.push(e.join(" ")+" TJ")},showTextln:function(e){this.currentStream.push(e+" '")},textMatrix:function(e,t,n,r,i,s){var o=Array.prototype.slice.call(arguments);if(o.length!==6)throw"Invalid text matrix";this.currentStream.push(o.join(" ")+" Tm")},nextLine:function(){this.currentStream.push("T*")}},obj=function(e,t){var n=this;this.objectNumber=e,this.generationNumber=t,this.body=[]};obj.prototype={out:function(){var e=this,t=[];return t.push(this.objectNumber+" "+this.generationNumber+" obj"),t=t.concat(this.body),t.push("endobj"),t.join("\n")},body:[],objectNumber:0,generationNumber:0};var pageNode=function(e,t,n,r,i,s){var o=this;obj.call(this,n,r),this.pageOptions=t,this.parent=e,this.contentStreams=i,this.currentStream=this.contentStreams[0],this.doc=s};pageNode.prototype=Object.create(obj.prototype,{out:{value:function(){var e,t,n=[];this.body.push("<< /Type /Page"),this.body.push(pageOptionsConverter(this.pageOptions)),this.body.push("/Parent "+this.parent.objectNumber+" "+this.parent.generationNumber+" R"),this.body.push("/Contents ");if(this.contentStreams.length){this.body.push("[");for(e=0;t=this.contentStreams[e];e++)this.body.push(t.objectNumber+" "+t.generationNumber+" R");this.body.push("]")}this.body.push(">>"),n.push(obj.prototype.out.apply(this,arguments));if(this.contentStreams.length)for(e=0;t=this.contentStreams[e];e++)n.push(t.out());return n.join("\n")}},setStream:{value:function(e){if(e>=this.contentStreams.length)throw"Invalid stream index";return this.currentStream=this.contentStreams[e],this}}}),mixin(pageNode,textOperators),mixin(pageNode,graphicOperators);var pageTreeNode=function(e,t,n,r){var i=this;obj.call(this,t,n),this.parent=e,this.kids=[],this.options=r};pageTreeNode.prototype=Object.create(obj.prototype,{out:{value:function(){var e,t;this.body.push("<< /Type /Pages",pageTreeOptionsConverter(this.options),"/Kids [");for(e=0;t=this.kids[e];e++)this.body.push(t.objectNumber+" "+t.generationNumber+" R");return this.body.push("]"),this.body.push("/Count "+walkPageTree(this)),this.parent&&this.body.push("/Parent "+this.parent.objectNumber+" "+this.parent.generationNumber+" R"),this.body.push(">>"),obj.prototype.out.apply(this,arguments)}}});var walkPageTree=function(e){var t=0,n,r;for(n=0;r=e.kids[n];n++)r instanceof pageNode?t++:t+=walkPageTree(r);return t},stream=function(e,t){var n=this;obj.call(this,e,t),this.content=[],this.dictionary={}},printDictionary=function(e){var t=[],n;for(n in e)e.hasOwnProperty(n)&&t.push("/"+n+" "+e[n]);return t.join("\n")};stream.prototype=Object.create(obj.prototype,{out:{value:function(){return this.body.push("<< /Length "+this.content.join("\n").length),this.body.push(printDictionary(this.dictionary)),this.body.push(" >>"),this.body.push("stream"),this.body=this.body.concat(this.content),this.body.push("endstream"),obj.prototype.out.apply(this,arguments)}},push:{value:function(e){return Array.prototype.push.apply(this.content,arguments),this}}});var font=function(e,t,n){var r=this;obj.call(this,t,n),this.description=e};font.prototype=Object.create(obj.prototype,{out:{value:function(){return this.body.push("<< /Type /Font"),this.body.push("/Subtype /Type1"),this.body.push("/BaseFont /"+this.description.postScriptName),typeof font.encoding=="string"&&this.body.push("/Encoding /"+this.description.encoding),this.body.push(">>"),obj.prototype.out.apply(this,arguments)}}});var imageXObject=function(e,t,n,r,i,s,o,u){var a=this;stream.call(this,e,t),this.width=n,this.height=r,this.colorSpace=i||utils.deviceRGB,this.bpc=s||8,this.filter=o,this.name="Im1",this.options=u||{}};imageXObject.prototype=Object.create(stream.prototype,{out:{value:function(){return this.dictionary.Type="/XObject",this.dictionary.Subtype="/Image",this.dictionary.Width=this.width,this.dictionary.Height=this.height,this.dictionary.ColorSpace="/"+this.colorSpace,this.dictionary.BitsPerComponent=this.bpc,this.filter&&(this.dictionary.Filter="/"+this.filter),stream.prototype.out.apply(this,arguments)}}});var PDF_VERSION="1.3",doc=function(e,t,n){var r=this;this.activeAsync=0,this.objectNumber=0,this.currentPage=null,this.fontmap={},this.settings={dimension:utils.paperFormat.letter,documentProperties:{title:"",subject:"",author:"",keywords:"",creator:""}},typeof e=="string"?r.settings.dimension=utils.paperFormat[e.toLowerCase()]:r.settings.dimension=e.slice().splice(0,2);if(t.toLowerCase()==="landscape"){var i=r.settings.dimension[0];r.settings.dimension[0]=r.settings.dimension[1],r.settings.dimension[1]=i}this.resObj=new resources(++this.objectNumber,0),this.rootNode=new pageTreeNode(null,++r.objectNumber,0,{mediabox:[0,0,this.settings.dimension[0],this.settings.dimension[1]],resources:this.resObj}),this.currentNode=this.rootNode,this.infoObj=info(this.settings,this.newObj()),this.catalogObj=catalog(this.rootNode,this.newObj()),this.addStandardFonts()};doc.prototype={objNumber:function(e){return e&&(this.objectNumber=value),e},page:function(e){return e&&(this.objectNumber=value),e},newObj:function(){return new obj(++this.objectNumber,0)},newStream:function(){return new stream(++this.objectNumber,0)},addPage:function(e,t,n){return this.currentPage=new pageNode(this.currentNode,n||{mediabox:[0,0,t||this.settings.dimension[0],e||this.settings.dimension[1]]},++this.objectNumber,0,[this.newStream()],this),this.currentNode.kids.push(this.currentPage),this.currentPage},output:function(e){var t=[buildPageTreeNodes(this.rootNode),buildObjs(this.resObj.fontObjs),buildObjs(this.resObj.imageXObjects),this.resObj.out(),this.infoObj.out(),this.catalogObj.out()].join("\n"),n=buildDocument(t,this.catalogObj,this.infoObj);switch(e){case"datauristring":case"dataurlstring":return"data:application/pdf;base64,"+btoa(n);case"datauri":case"dataurl":document.location.href="data:application/pdf;base64,"+btoa(n);break;case"dataurlnewwindow":window.open("data:application/pdf;base64,"+btoa(n));break;default:return n}},outputAsync:function(e,t){var n=this,r=window.setInterval(function(){n.activeAsync===0&&(window.clearInterval(r),t(n.output(e)))},50)},addFont:function(e,t,n,r){var i="F"+(this.resObj.fontObjs.length+1).toString(10),s={key:i,postScriptName:e,fontName:t,fontStyle:n,encoding:r,metadata:{}};return this.resObj.fontObjs.push(new font(s,++this.objectNumber,0)),t=t.toLowerCase(),n=n.toLowerCase(),this.fontmap[t]||(this.fontmap[t]={}),this.fontmap[t][n]=i,i},addStandardFonts:function(){var e="helvetica",t="times",n="courier",r="normal",i="bold",s="italic",o="bolditalic",u="StandardEncoding",a=[["Helvetica",e,r],["Helvetica-Bold",e,i],["Helvetica-Oblique",e,s],["Helvetica-BoldOblique",e,o],["Courier",n,r],["Courier-Bold",n,i],["Courier-Oblique",n,s],["Courier-BoldOblique",n,o],["Times-Roman",t,r],["Times-Bold",t,i],["Times-Italic",t,s],["Times-BoldItalic",t,o]],f,l,c,h;for(f=0,l=a.length;f<l;f++)c=this.addFont(a[f][0],a[f][1],a[f][2],u);return this}};var getOffsets=function(e){if(typeof e!="string")throw"getOffsets expects a string input";var t=[],n=/\d+(?=\sobj)/,r=/^\d+/,i,s,o;i=e.match(/\d+\s\d+\sobj/gim);for(s=0;o=i[s];s++)t.push({objNum:parseInt(r.exec(o)),genNum:parseInt(n.exec(o)),offset:e.indexOf(o)});return t},buildPageTreeNodes=function(e){var t=this,n=[e.out()],r,i;for(r=0;i=e.kids[r];r++){if(i instanceof pageTreeNode){n.push(buildPageTreeNodes(i));continue}n.push(i.out())}return n.join("\n")},buildObjs=function(e){var t,n,r=[];for(t=0;n=e[t];t++)r.push(n.out());return r.join("\n")},buildDocument=function(e,t,n){var r,i=["%PDF-"+PDF_VERSION,e],s=i.join("\n"),o=s.length,u=getOffsets(s),a=u.length;u=u.sort(function(e,t){return e.objectNumber-t.objectNumber}),i.push("xref"),i.push("0 "+(a+1)),i.push("0000000000 65535 f ");for(r=0;r<a;r++)i.push(padd10(u[r].offset)+" 00000 n ");return i.push("trailer"),i.push("<<"),i.push("/Size "+(a+1)),i.push("/Root "+t.objectNumber+" 0 R"),i.push("/Info "+n.objectNumber+" 0 R"),i.push(">>"),i.push("startxref"),i.push(o),i.push("%%EOF"),i.join("\n")},catalog=function(e,t){return t.body=[],t.body.push("<<"),t.body.push("/Type /Catalog"),t.body.push("/Pages "+e.objectNumber+" "+e.generationNumber+" R"),t.body.push("/PageLayout /OneColumn"),t.body.push(">>"),t},info=function(e,t){t.body=[],t.body.push("<<"),t.body.push("/Producer (PDFjs "+PDFJS_VERSION+")"),e.documentProperties.title&&t.body.push("/Title ("+pdfEscape(e.documentProperties.title)+")"),e.documentProperties.subject&&t.body.push("/Subject ("+pdfEscape(e.documentProperties.subject)+")"),e.documentProperties.author&&t.body.push("/Author ("+pdfEscape(e.documentProperties.author)+")"),e.documentProperties.keywords&&t.body.push("/Keywords ("+pdfEscape(e.documentProperties.keywords)+")"),e.documentProperties.creator&&t.body.push("/Creator ("+pdfEscape(e.documentProperties.creator)+")");var n=new Date;return t.body.push("/CreationDate (D:"+[n.getFullYear(),padd2(n.getMonth()+1),padd2(n.getDate()),padd2(n.getHours()),padd2(n.getMinutes()),padd2(n.getSeconds())].join("")+")"),t.body.push(">>"),t},resources=function(e,t){var n=this;obj.call(this,e,t),this.fontObjs=[],this.imageXObjects=[]},printDictionaryElements=function(e,t){var n=[],r,i;for(r=0,i=e.length;r<i;r++)n.push("/"+t+(r+1).toString(10)+" "+e[r].objectNumber+" "+e[r].generationNumber+" R");return n.join("\n")};resources.prototype=Object.create(obj.prototype,{out:{value:function(){return this.body.push("<<"),this.body.push("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),this.body.push("/Font <<"),this.body.push(printDictionaryElements(this.fontObjs,"F")),this.body.push(">>"),this.body.push("/XObject <<"),this.body.push(printDictionaryElements(this.imageXObjects,"Im")),this.body.push(">>"),this.body.push(">>"),obj.prototype.out.apply(this,arguments)}}});var pageOptionsConverter=function(e){var t=[],n;for(var r in e){if(!e.hasOwnProperty(r))continue;n=e[r];switch(r.toLowerCase()){case"resources":if(n instanceof resources)t.push("/Resources "+n.objectNumber+" "+n.generationNumber+" R");else{if(typeof n!="string")throw"Invalid Resources!";t.push(n)}break;case"mediabox":checkValidRect(n)&&t.push("/MediaBox ["+n.join(" ")+"]");break;case"cropbox":checkValidRect(n)&&t.push("/CropBox ["+n.join(" ")+"]");break;case"bleedbox":checkValidRect(n)&&t.push("/BleedBox ["+n.join(" ")+"]");break;case"trimbox":checkValidRect(n)&&t.push("/TrimBox ["+n.join(" ")+"]");break;case"artbox":checkValidRect(n)&&t.push("/ArtBox ["+n.join(" ")+"]");break;case"rotate":typeof n=="number"&&n%90===0&&t.push("/Rotate "+n);break;case"thumb":break;case"b":break;case"dur":break;case"Trans":break;case"Annots":break;case"AA":break;case"PieceInfo":break;case"LastModified":break;case"StructParents":break;case"ID":break;case"PZ":break;case"SeparationInfo":}}return t.join("\n")},pageTreeOptionsConverter=function(e){var t=[],n;for(var r in e){if(!e.hasOwnProperty(r))continue;n=e[r];switch(r.toLowerCase()){case"resources":if(n instanceof resources)t.push("/Resources "+n.objectNumber+" "+n.generationNumber+" R");else{if(typeof n!="string")throw"Invalid Resources!";t.push(n)}break;case"mediabox":checkValidRect(n)&&t.push("/MediaBox ["+n.join(" ")+"]");break;case"cropbox":checkValidRect(n)&&t.push("/CropBox ["+n.join(" ")+"]");break;case"rotate":typeof n=="number"&&n%90===0&&t.push("/Rotate "+n)}}return t.join("\n")},to8bitStream=function(e,t){var n,r,i;t===i&&(t={});var s=t.sourceEncoding?s:"Unicode",o,u=t.outputEncoding,a,f,l,c;if((t.autoencode||u)&&fonts[activeFontKey].metadata&&fonts[activeFontKey].metadata[s]&&fonts[activeFontKey].metadata[s].encoding){o=fonts[activeFontKey].metadata[s].encoding,!u&&fonts[activeFontKey].encoding&&(u=fonts[activeFontKey].encoding),!u&&o.codePages&&(u=o.codePages[0]),typeof u=="string"&&(u=o[u]);if(u){f=!1,a=[];for(n=0,r=e.length;n<r;n++)l=u[e.charCodeAt(n)],l?a.push(String.fromCharCode(l)):a.push(e[n]),a[n].charCodeAt(0)>>8&&(f=!0);e=a.join("")}}n=e.length;while(f===i&&n!==0)e.charCodeAt(n-1)>>8&&(f=!0),n--;if(!f)return e;a=t.noBOM?[]:[254,255];for(n=0,r=e.length;n<r;n++){l=e.charCodeAt(n),c=l>>8;if(c>>8)throw new Error("Character at position "+n.toString(10)+" of string '"+e+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");a.push(c),a.push(l-(c<<8))}return String.fromCharCode.apply(i,a)},pdfEscape=function(e,t){return to8bitStream(e,t).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},sanitizeRegex=/((\(|\)|\\))/ig,sanitize=function(e){return e.replace(sanitizeRegex,"\\$1")},checkValidRect=function(e){if(!e||typeof e!="object"||e.length!==4)return console.warn("Invalid Rect"),!1;for(var t=0;t<4;t++)if(typeof e[t]!="number")return console.warn("Invalid Rect"),!1;return!0},f=function(e){return e.toFixed(2)},f3=function(e){return e.toFixed(3)},padd2=function(e){var t=e.toFixed(0);return e<10?"0"+t:t},padd10=function(e){var t=e.toFixed(0);return t.length<10?(new Array(11-t.length)).join("0")+t:t},utils={paperFormat:{a3:[841.89,1190.55],a4:[595.28,841.89],a5:[420.94,595.28],letter:[612,792],legal:[612,1008]},lineCapStyle:{buttCap:0,roundCap:1,projectinSquareCap:2},lineJoinStyle:{miterJoin:0,roundJoin:1,bevelJoin:2},renderingIntentOption:{absoluteColorimetric:"AbsoluteColorimetric",relativeColorimetric:"RelativeColorimetric",saturation:"Saturation",perceptual:"Perceptual"},pathPaintingOption:{bigS:"S",smallS:"s",smallF:"f",fStar:"f*",bigB:"B",bigBStar:"B*",smallB:"b",smallBStar:"b*",n:"n"},colorSpace:{deviceGray:"DeviceGray",deviceRGB:"DeviceRGB",deviceCMYK:"DeviceCMYK"},textMode:{fillText:0,strokeText:1,fillStrokeText:2,invisibleText:3,fillClipText:4,strokeClipText:5,fillStrokeClipText:6,clipText:7}};doc.prototype.newImage=function(e,t,n){var r=new imageXObject(++this.objectNumber,0,0,0,utils.colorSpace.deviceRGB,8,"DCTDecode");return analyzeImage.call(this,e,r,n||this.resObj,t,this),r};var analyzeImage=function(e){if(e instanceof HTMLImageElement)processImage.apply(this,[e].concat(Array.prototype.slice.call(arguments,1,3)));else if(typeof e=="string")processImageSource.apply(this,[e].concat(Array.prototype.slice.call(arguments,1)));else{if(!(e instanceof HTMLCanvasElement))throw"Invalid Image Type";processCanvas.apply(this,[e].concat(Array.prototype.slice.call(arguments,1,3)))}},processImageSource=function(e,t,n,r,i){var s=new Image;s.onload=function(e){i.activeAsync--,processImage.call(this,s,t,n)},r&&(s.crossOrigin="anonymous"),i.activeAsync++,s.src=e},processImage=function(e){var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");if(!n)throw"addImage requires canvas to be supported by browser.";n.drawImage(e,0,0,t.width,t.height),processCanvas.apply(this,[t].concat(Array.prototype.slice.call(arguments,1)))},processCanvas=function(e,t,n){var r=e.toDataURL("image/jpeg"),i=processImageData(r,"jpeg");t.content.push(i.data),t.name="Im"+(n.imageXObjects.length+1),t.width=i.width,t.height=i.height,n.imageXObjects.push(t)},processImageData=function(e,t){var n={width:0,height:0,data:""},r;t=t.toLowerCase(),e.substring(0,23)==="data:image/jpeg;base64,"&&(e=atob(e.replace("data:image/jpeg;base64,","")),t="jpeg");try{if(t=="jpeg"||!t)r=getJpegSize(e),n.width=r[0],n.height=r[1]}catch(i){console.log("Image is not JPEG")}return n.data=e,n},getJpegSize=function(e){var t,n;if(!e.charCodeAt(0)===255||!e.charCodeAt(1)===216||!e.charCodeAt(2)===255||!e.charCodeAt(3)===224||!e.charCodeAt(6)==="J".charCodeAt(0)||!e.charCodeAt(7)==="F".charCodeAt(0)||!e.charCodeAt(8)==="I".charCodeAt(0)||!e.charCodeAt(9)==="F".charCodeAt(0)||!e.charCodeAt(10)===0)throw new Error("getJpegSize requires a binary jpeg file");var r=e.charCodeAt(4)*256+e.charCodeAt(5),i=4,s=e.length;while(i<s){i+=r;if(e.charCodeAt(i)!==255)throw new Error("getJpegSize could not find the size of the image");if(e.charCodeAt(i+1)===192)return n=e.charCodeAt(i+5)*256+e.charCodeAt(i+6),t=e.charCodeAt(i+7)*256+e.charCodeAt(i+8),[t,n];i+=2,r=e.charCodeAt(i)*256+e.charCodeAt(i+1)}},pdfJS={doc:function(e,t,n){var r=new doc(e,t,n);return{objNum:function(){r.objNumber.apply(r,arguments)},currentPage:function(){return r.page.apply(r,arguments)},createObj:function(){return r.newObj.apply(r,arguments)},createStream:function(){return r.newStream.apply(r,arguments)},addPage:function(){return r.addPage.apply(r,arguments)},root:function(){return r.rootNode.apply(r,arguments)},output:function(){return r.output.apply(r,arguments)},outputAsync:function(){return r.outputAsync.apply(r,arguments)},addFont:function(){return r.addFont.apply(r,arguments)},newImage:function(){return r.newImage.apply(r,arguments)}}},obj:obj,pageTreeNode:pageTreeNode,utils:utils};_.pdfJS=pdfJS;

}(window));